\input{tex/preamble}
\graphicspath{ {./figures/} }

\title{%
    \begin{center} \includegraphics[width=150pt]{dna} \end{center}
    A1: \textit{The MEAN Central Dogma}}
\author{Julian Mazzitelli, \textit{iGEM UofT} 
}
\date{May 14, 2015 \\ \vspace{5pt}
{\small Due: May 20, 2015 or May 22, 2015, or \textit{anytime thereafter} }}

\hypersetup{
    colorlinks=true,
    urlcolor=TealBlue
}

% hrefs
\def\AngularJS{\href{https://angularjs.org/}{AngularJS}}
\def\RESTful{\href{http://en.wikipedia.org/wiki/Representational_state_transfer}{RESTful}}
\def\NodeJS{\href{https://nodejs.org/}{Node.js}}
\def\ExpressJS{\href{http://expressjs.com/}{Express}}
\def\API{\href{http://en.wikipedia.org/wiki/Application_programming_interface}{API}}
\def\MongoDB{\href{https://www.mongodb.org/}{MongoDB}}
\def\SPA{\href{http://en.wikipedia.org/wiki/Single-page_application}{SPA}}
\def\centraldogma{\href{http://en.wikipedia.org/wiki/Central_dogma_of_molecular_biology}{central dogma}}
\def\pythondna{\href{https://github.com/igemuoftATG/tutorials/tree/master/Python/\%5B03\%5DDNA!}{Python DNA!}}
\def\javascripting{\href{https://github.com/sethvincent/javascripting}{javascripting}}
\def\learnyounode{\href{https://github.com/workshopper/learnyounode}{learnyounode}}
\def\expressworks{\href{https://github.com/azat-co/expressworks}{expressworks}}

\begin{document}
\reversemarginpar

\maketitle

\section{Introduction}

This assignment will be an introduction to the modern full-stack web application
while also promoting an improved understanding of the transfer of information
within biological systems. You will build a single page application (\SPA) with
\AngularJS\ which communicates with a \RESTful\ \NodeJS\ (\ExpressJS)
\textit{application programming interface} (\API) and stores data on a \MongoDB\
database. This is the MEAN stack:

\begin{center}
    MongoDB $\leftrightarrow$ Node.js (Express) $\leftrightarrow$ AngularJS
\end{center} 

Moreover, you will write code in more than one language, interact with a number
of frameworks/APIs, make a new best friend (documentation!), and consider the
viability of your chosen data structures and algorithms for a given problem. 

Your API will be capable of manipulating data forwards and backwards between
each stage of biological information flow.  You will not know what format the
incoming data is, and will have to decide which conversion to use.  That is,
given DNA, RNA, or a polypeptide sequence, you must convert to each of the other
two.  Ultimately, you will describe the \centraldogma\ of molecular biology:

\input{tex/centraldogma}

\mpnote

\noindent We will not consider DNA/DNA, RNA/RNA, or \textbf{protein/DNA}
interactions in this assignment. Though you should realize the \textbf{crucial} 
implications of positive/negative regulation of DNA expression through
protein/DNA interactions.\\

\mymarginpar{\textit{Prerequisites}}

\noindent You \textbf{must} complete our \pythondna\ assignment before starting
this. You will call your python script from the back-end. You should also
have completed \javascripting,  \learnyounode, and \expressworks. If you have
trouble completing the DNA! assignment, consider trying out codecademy's 
\href{http://www.codecademy.com/en/tracks/python}{Python tutorial}.

\section{Environment}

It is necessary you have a proper development environment set up before
beginning this assignment. You will need Python 3, Node.js and MongoDB. Your npm
version should be up to date (Node.js comes with npm 2.7.4 but the latest is
2.9.something). Upgrading npm can be achieved with \\

\noindent \texttt{\$ npm install -g npm} \\

If the previous does not upgrade your npm, it is most likely that you are on
Windows and the path to Node.js occurs before the path to node\_modules between
your PATH and path environment variables (PATH loaded first).  Once npm is up to
date, you can install a few other global modules which you will be using:

\begin{verbatim}
$ npm install -g yo bower grunt-cli gulp
\end{verbatim}

If you have issues starting a local MongoDB service, again, you are probably on
Windows and what you need to do is 

\begin{verbatim}
$ mkdir C:\data\db    
\end{verbatim}

and run (while you start \texttt{mongo} in another terminal) 

\begin{verbatim}
$ mongodb -dbpath C:\data\db  
\end{verbatim}
If you have any issues getting set up, Google is your friend. 

\section{Requirements}

Your app must:
\begin{itemize}
    \item use a Python script to convert DNA $\rightarrow$ protein
    \item use JavaScript to convert protein $\rightarrow$ DNA
    \item accept data at endpoints of your choice
    \item provide endpoints to retreive data from database
    \item use unit testing with Mocha
    \item store converted data in the database 
\end{itemize}

\section{Boilerplates}

You may find the following boilerplate generators useful.

\noindent The generator made by the Express team: \\
\texttt{\$ npm install -g express-generator} \\ 
A port of the above to yeoman: \\
\texttt{\$ npm insall -g generator-express} \\
A popular MEAN boilerplate: \\
\texttt{\$ npm install -g generator-angular-fullstack} \\
mean.io's generator \\
\texttt{\$ npm install -g mean-cli} \\
A front-end only AngularJS generator \\
\texttt{\$ npm install -g generator-gulp-angular}

\section{The MEAN Stack}

The MEAN stack is the acronym given to a full-stack web server using Node.js as
it's serverside engine, with Express as a framework for Node, using MongoDB for
a database, and using the frontend framework AngularJS which eases the 
difficulty of making single page applications. We will go through a quick intro
to each of these members, but first an understanding of how a web application
works must be acquired. 


\subsection{Static HTML}

A simple, bare bones website is just an \texttt{html} file, or series of
\texttt{html} files. HTML stands for \textit{hypertext markup language} and is 
very simple to understand. Here is a basic \texttt{helloworld.html} webpage:

%\lstlisting{files/html/helloworld.html}

\inputminted{html}{files/html/helloworld.html}

The first line must declare the doctype, and everything else must be contained
within a \mintinline{html}|<html>| tag. A \mintinline{html}|<tag>| must always
have its corresponding closing \mintinline{html}|</tag>|. Everything within 
\mintinline{html}|<head>| is where you declare the title which appears on your
window, and other things such as stylesheets, JavaScript scripts, favicons, etc.
All of the content that appears on your webpage will be placed inside the
\mintinline{html}|<body>| tag. Here is a HTML5 cheatsheet, although the above
and these are almost all the tags you will ever use:

\begin{minted}{html}
<h1>...<h6>, <a href="www.igem.skule.ca">iGEM UofT</a>, 
<a href="./localFile.html">tab 2</a>, <div>"division"</div>, 
<ul> unordered list </ul>, <ol> ordered list </ol>, <li> list item </li>,
<img src="logo.png" />
\end{minted}

Some tags are self closing, like \mintinline{html}|<img>|, but would still work
as an open/close tag pair. Tags can have one id and multiple space seperated
classes:

\begin{minted}{html}
<tag id="myId" class="title active">
\end{minted}

All that is left to finish this basic intro to a static web page is to mention
stylesheets and scripts. I will leave this following example:

\inputminted{html}{files/html/DNA.html}

Plain html pages work great for static websites like brochures and restaurant
menus, but fail at delivering dynamic content. 

\subsection{Server-side processing}

The creation of dynamic web pages such as forums required the development of
server-side processing. There are many languages which can render html server
side, among them Python(Django, Flask), .net, PHP and others. PHP has been the
most popular choice for server side languages until Node came along. PHP stands
for \textit{Prepocessor Hyptertext: Php}, and it is exacly that. A PHP server
will render each unique page of html and \textit{then} send it to the client. So
for example, on a forum, if you click on a thread, the client machine will tell
the server which thread you want to look at, the server will then loop through
each post in that thread in the database, compile a complete html page, and send
it back to you. Visually, the flow is as follows:

\begin{center}
database $\leftrightarrow$ server $\leftrightarrow$ client
\end{center}

Node can be used like this as well, to render each page. However in our webapp,
Node will only act as an API, sending JSONs back and forth on get and post 
requests. 

\subsection{Node.js}

Node.js is a runtime environment for server-side and networking applications.
Node had it's first release in 2009. The core functionality of Node was written
in JavaScript and C++ was used for connecting bindings and the operating system.
Google's V8 engine, the JS execution engine built for Google Chrome, compiles JS
into machine code, and is what Node uses to execute code. Previously, JS was
interpreted in real time; V8 heavily optimized JS.  Before Node, JavaScript
could only be executed client-side. A big difference between Node and PHP is
that PHP is a blocking language, while Node is non-blocking, allowing commands
to execute in parallel and signal completion with a callback.  A simple JSON API
web server can be generated using Node with several lines:

\inputminted{js}{files/nodejs/hw.js}

Test out this server yourself by running

\begin{verbatim}
$ node hw.js 9001
\end{verbatim}

and visiting \texttt{http://localhost:9001/home} and  \texttt{/bye}. For a more
thorough introduction to Node.js, you are required to complete \learnyounode.
If you are unfamiliar with JavaScript, you may wish to do \javascripting\ first.

\subsection{Express}

\subsection{MongoDB}

\subsection{AngularJS}

\end{document}
